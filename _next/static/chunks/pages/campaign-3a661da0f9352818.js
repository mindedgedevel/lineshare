(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{7414:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaign",function(){return a(4462)}])},6098:function(e,t,a){"use strict";a.d(t,{RQ:function(){return M},S_:function(){return d},Sv:function(){return o},_Z:function(){return l},gz:function(){return N},uL:function(){return u}});var n=a(6637),s=a(7632);let c="https://api.line.me/v2",i="https://node-red.guka.dev";async function l(e,t){if(!e&&!t)return null;let a=await fetch("".concat(c,"/oauth/accessToken"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"client_credentials",client_id:e,client_secret:t})});return a.json()}async function r(e){if(!e)return null;let t=await fetch("".concat(c,"/oauth/verify"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({access_token:e})});return t.json()}async function M(e){let{data:t,error:a}=await n.g.from("shops").select("*").eq("id",e);if(a)return null;let s=await r(t[0].access_data.access_token);if(s.error_description){let a=await l(t[0].chanel_id,t[0].chanel_secret);return await n.g.from("shops").update({access_data:a}).eq("id",e),a.access_token}return t[0].access_data.access_token}async function o(e){if(!e)return null;let t=await fetch("".concat(i,"/line/api/getbotinfo"),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}});return t.json()}async function u(e){if(!e)return null;let t=await fetch("".concat(i,"/line/api/getaudiences"),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}});return t.json()}async function d(e,t){if(!e)return null;let a=await fetch("".concat(i,"/line/api/sendbcall"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e,"X-Line-Retry-Key":(0,s.Z)()},body:JSON.stringify({messages:[t]})});return a.json()}async function N(e,t,a){if(!e)return null;let n=await fetch("".concat(i,"/line/api/sendbcaudience"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e,"X-Line-Retry-Key":(0,s.Z)()},body:JSON.stringify({messages:[t],recipient:{type:"operator",and:[{type:"audience",audienceGroupId:a}]}})});return n.json()}},4462:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var n=a(5893),s=a(7294),c=a(4053),i=a(9778),l=a(6098);a(4298);var r=a(6248),M=a.n(r);function o(e){let{lineProfile:t,campaigndata:a,shareState:s,shareTargetPicker:l}=e,r=(0,c.useSupabaseClient)(),o=()=>{let e=(0,i.jE)("share-".concat(a.id))||0,n=parseInt(e);if((0,i.w4)("share-".concat(a.id),n+1,i.Hk),s.setShareCount(parseInt((0,i.jE)("share-".concat(a.id)))),a&&t){let e={};e.cmpid=a.id,e.lnid=t.sub,u([{event_name:"share",event_value:1,data:{},line_id:e.lnid,camp_id:e.cmpid}])}},u=async e=>{let{error:t}=await r.from("reports").insert(e);if(t){alert(t.message);return}};return(0,n.jsx)("article",{className:"flex flex-col justify-around px-4 py-8 min-h-screen ".concat(M().className),children:(0,n.jsxs)("div",{className:"flex flex-col items-center text-center rounded-xl bg-white h-full w-full",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2 items-center p-2",children:[(0,n.jsx)("figure",{className:"w-14 h-14 rounded-full bg-gray-300 mt-[-28px]",children:(0,n.jsx)("img",{className:"rounded-full w-14 h-14",alt:"line profile",src:t.picture?t.picture:"https://placehold.co/42x42"})}),(0,n.jsxs)("h1",{className:"font-bold text-sm",children:["สวัสดีคุณ ",t.name?t.name:"xxx"]})]}),(0,n.jsx)("figure",{className:" w-full min-h-[320px] bg-gray-300",children:(0,n.jsx)("img",{alt:"image campaign",src:a.content.cover?a.content.cover:"https://placehold.co/1080x1080"})}),(0,n.jsxs)("div",{className:"flex flex-col flex-grow gap-2 py-4 px-6 w-full",children:[(0,n.jsxs)("p",{className:"text-lg",children:["แชร์แล้ว\xa0",(0,n.jsx)("span",{className:" text-primary-400",children:s.shareCount}),"\xa0คน"]}),(0,n.jsx)("p",{className:"text-sm mt-2 text-gray-500 whitespace-pre-wrap break-words",children:a.name?a.name:null}),(0,n.jsx)("p",{className:"text-xs text-gray-500 whitespace-pre-wrap break-words",children:a.content.descriptioncampaign?a.content.descriptioncampaign:null}),(0,n.jsxs)("div",{className:"flex-grow",children:[(0,n.jsx)("h2",{className:"text-xs font-bold text-center mt-4",children:"เงื่อนไข"}),(0,n.jsx)("p",{className:"text-xs ".concat(M().className," text-left break-words whitespace-pre-wrap text-gray-500"),children:a.content.privacy?a.content.privacy:null})]}),(0,n.jsx)("div",{className:"flex mx-[-1.5rem] mb-[-1.5rem] mt-2",children:(0,n.jsx)("button",{onClick:()=>{let e=decodeURIComponent(window.location.search),n=new URLSearchParams(e),s="https://liff.line.me/".concat(n.get("lfid")+"?cmpid="+n.get("cmpid")+"&lfid="+n.get("lfid"),"&ref=").concat(t.sub);a.flexmsg.contents.body.contents[1].contents[1].contents[3].action.uri=encodeURI(s);let c=a.flexmsg;l([c],{isMultiple:!1}).then(e=>{e&&"success"===e.status?(console.log("[".concat(e.status,"] Message sent!")),o()):console.log("TargetPicker was closed!")}).catch(e=>{alert("Error something wrong")})},className:"bg-green-500 py-2 px-4 rounded-xl rounded-t-none text-white w-full",children:a.content.buttonshare?a.content.buttonshare:null})})]})]})})}var u=a(5383),d=a.n(u),N=a(2175),j=a(6310),m=a(9464),x=a(7925);let p={loop:!0,autoplay:!0,animationData:x};function y(e){let{campaigndata:t,lineProfile:a,iscompleteState:l}=e,[r,M]=(0,s.useState)(!1),[o,u]=(0,s.useState)(!1),x=(0,c.useSupabaseClient)(),y=(0,N.TA)({initialValues:{fullname:"",phone:"","accept-privacy":""},validationSchema:j.Ry().shape({fullname:j.Z_().min(2,"ตัวอักษรน้อยเกินไป").max(50,"ตัวอักษรมากเกินไป").required("กรุณาป้อนชื่อ-สกุล 2-50 ตัวอักษร"),phone:j.Z_().min(9,"เบอร์โทรไม่ถูกต้อง").max(10,"เบอร์โทรไม่ถูกต้อง").matches(/((\+66|0)(\d{1,2}\-?\d{3}\-?\d{3,4}))|((\+๖๖|๐)([๐-๙]{1,2}\-?[๐-๙]{3}\-?[๐-๙]{3,4}))/,"เบอร์โทรไม่ถูกต้อง").required("กรุณาป้อนเบอร์มือถือ"),"accept-privacy":j.O7().required("จำเป็นต้องกดยอมรับเงื่อนไข")}),onSubmit:async e=>{if(!e)return;u(!0);let{data:n,error:s}=await x.from("customers").select("line_id,camp_id,phone").eq("phone",e.phone).eq("camp_id",t.id).eq("line_id",a.sub);if(s){u(!1),alert(s.message);return}if(n.length){u(!1),alert("คุณยืนยันสิทธิ์ไปแล้วไม่สามารถยืนยันซ้ำได้");return}let c=await x.from("customers").insert({phone:e.phone,name:e.fullname,line_id:a.sub,camp_id:t.id,shop_id:t.shop_id,isuse:!1}).select();c.data&&((0,i.w4)("rgcp-".concat(t.id),!0,i.Hk),(0,i.w4)("name-".concat(t.id),e.fullname,i.Hk),(0,i.w4)("phone-".concat(t.id),e.phone,i.Hk),l.setisComplete(!0)),u(!1)}});return(0,n.jsx)("article",{className:"bg-gray-200 flex flex-col justify-around px-4 py-8 min-h-screen ".concat(d().className),children:(0,n.jsx)("div",{className:"flex flex-col rounded-xl bg-white h-full w-full",children:(0,n.jsxs)("div",{className:"w-full p-4",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)(m.Z,{options:p,width:200,height:200}),(0,n.jsx)("h1",{className:"text-xl font-bold",children:"สำเร็จคุณแชร์ครบแล้ว"})]}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("h1",{className:"text-xl font-bold",children:"กรอกข้อมูลเพื่อยืนยันสิทธิ์"})}),(0,n.jsx)("div",{className:"form-container mt-2",children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log(y),y.handleSubmit()},className:"flex flex-col gap-3 ".concat(d().className),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{htmlFor:"register-name",className:"font-medium",children:"ชื่อ-สกุล"}),(0,n.jsx)("input",{type:"text",id:"register-name",name:"fullname",className:"border p-2 rounded",placeholder:"พิมพ์ที่นี่...",value:y.values.fullname,onChange:y.handleChange}),y.errors.fullname&&y.touched.fullname?(0,n.jsx)("div",{className:"text-red-500 text-xs",children:y.errors.fullname}):null]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{htmlFor:"register-phone",className:"font-medium",children:"เบอร์โทร"}),(0,n.jsx)("input",{type:"tel",id:"register-phone",name:"phone",className:"border p-2 rounded",placeholder:"พิมพ์ที่นี่...",value:y.values.phone,onChange:y.handleChange}),y.errors.phone&&y.touched.phone?(0,n.jsx)("div",{className:"text-red-500 text-xs",children:y.errors.phone}):null]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex items-center h-5",children:(0,n.jsx)("input",{id:"helper-checkbox",type:"checkbox",name:"accept-privacy",checked:y.values["accept-privacy"],onChange:()=>{y.setFieldValue("accept-privacy",""===y.values["accept-privacy"]||"")},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),(0,n.jsx)("div",{className:"ml-2 text-sm",children:(0,n.jsxs)("label",{for:"helper-checkbox",className:"text-gray-600",children:["ฉันยอมรับ",(0,n.jsx)("span",{onClick:()=>M(!r),className:"text-blue-600",children:"เงื่อนไขข้อตกลง"}),"ของสิทธิพิเศษนี้"]})})]}),y.errors["accept-privacy"]&&y.touched["accept-privacy"]?(0,n.jsx)("div",{className:"text-red-500 text-xs",children:y.errors["accept-privacy"]}):null,r&&(0,n.jsx)("div",{className:"flex",children:(0,n.jsxs)("div",{className:"ml-2 text-sm",children:[(0,n.jsx)("p",{className:"text-sm ".concat(d().className),children:"เงื่อนไขและข้อตกลง"}),(0,n.jsx)("p",{className:"text-xs ".concat(d().className," text-left break-words whitespace-pre-wrap text-gray-500"),children:t.content.privacy?t.content.privacy:null})]})}),(0,n.jsx)("div",{className:"flex mx-[-1rem] mb-[-1rem] mt-2",children:(0,n.jsx)("button",{type:"submit",className:"bg-green-500 py-2 px-4 rounded-xl rounded-t-none text-white w-full",children:o?"กำลังโหลด...":"ยืนยันสิทธิ์"})})]})})]})})})}var w=a(6982),g=a.n(w);function h(e){let{campaigndata:t,lineProfile:a,name:s,phone:c}=e;return(0,n.jsx)("article",{className:"bg-gray-200 flex flex-col justify-around px-4 py-8 min-h-screen ".concat(g().className),children:(0,n.jsx)("div",{className:"flex flex-col items-center rounded-xl bg-white h-full w-full",children:(0,n.jsxs)("div",{className:"w-full p-4 flex flex-col gap-4 ",children:[(0,n.jsxs)("figure",{className:"rounded-full bg-primary-500 flex gap-4 items-center",children:[(0,n.jsx)("img",{className:"rounded-full w-14 h-14",alt:"line profile",src:a.picture?a.picture:"https://placehold.co/42x42"}),(0,n.jsxs)("div",{className:"flex flex-col w-full",children:[(0,n.jsx)("h1",{className:"text-xl",children:a.name?a.name:"Name"}),(0,n.jsx)("p",{className:"text-sm",children:"ได้ทำตามเงื่อนไขครบเรียบร้อยแล้ว"})]})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("figure",{className:"w-full relative",children:[(0,n.jsx)("img",{alt:"image campaign",src:t.content.cover?t.content.cover:"https://placehold.co/600x600",className:"rounded"}),(0,n.jsx)("img",{className:"absolute bottom-2 right-2 w-[128px] h-[128px]",src:"https://chart.googleapis.com/chart?cht=qr&chs=128x128&chl=".concat(encodeURIComponent((()=>{let e=window.location.origin?window.location.origin:"";return e+"/web-friends-get-friends"})()+"/scanqr?cmpid="+t.id+"&sub="+a.sub)),alt:"qr code"})]})}),(0,n.jsx)("div",{className:"text-center",children:"แสดง QR Code นี้กับพนักงานเพื่อใช้สิทธิ์"})]})})})}var z=a(2674);function f(e){let{router:t}=e,[r,M]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[N,j]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),[p,w]=(0,s.useState)(null),[g,f]=(0,s.useState)(!0),[L,T]=(0,s.useState)(null),[D,I]=(0,s.useState)(0),[C,A]=(0,s.useState)(!1),[b,Y]=(0,s.useState)(null),[S,v]=(0,s.useState)(!0),[O,E]=(0,s.useState)(null),[k,U]=(0,s.useState)(null),[_,Q]=(0,s.useState)(null),Z=(0,c.useSupabaseClient)();(0,s.useEffect)(()=>{R()},[]),(0,s.useEffect)(()=>{r&&new r},[r]),(0,s.useEffect)(()=>{let e=(0,i.jE)("share-".concat(p?p.id:""))?(0,i.jE)("share-".concat(p?p.id:"")):0,t=!!(0,i.jE)("rgcp-".concat(p?p.id:""))&&(0,i.jE)("rgcp-".concat(p?p.id:"")),a=(0,i.jE)("cmpid-".concat(p?p.id:""))?(0,i.jE)("cmpid-".concat(p?p.id:"")):null,n=(0,i.jE)("name-".concat(p?p.id:""))?(0,i.jE)("name-".concat(p?p.id:"")):null,s=(0,i.jE)("phone-".concat(p?p.id:""))?(0,i.jE)("phone-".concat(p?p.id:"")):null;I(e),A(t),Y(a),E(n),U(s)},[D,C,b,O,k]);let R=async()=>{let e=(await a.e(240).then(a.bind(a,4240))).default,t=decodeURIComponent(window.location.search).replace("?liff.state=",""),n=new URLSearchParams(t),s=n.get("lfid"),c=n.get("cmpid"),r=n.get("ref");if(s&&c)try{await e.init({liffId:s}),await e.ready;let t=await e.isInClient(),a=await e.getOS(),n=await e.getDecodedIDToken(),{friendFlag:l}=await e.getFriendship(),{data:M,error:o}=await Z.from("campaigns").select("id,content,name,shop_id,flexmsg").eq("id",c);if(o&&alert("cmpid "+o.message),M.length){w(M[0]);let e=(0,i.jE)("cmpid-".concat(M[0].id));e?Y(e):((0,i.w4)("cmpid-".concat(M[0].id),M[0].id,i.Hk),Y((0,i.jE)("cmpid-".concat(M[0].id))))}l&&M.length&&await P(c,n,r),x(t),Q(a),d(n),f(l),v(!1)}catch(e){console.error("liff init error",e.message),j(e)}if(!g&&p){let e=await (0,l.RQ)(p.id),t=await (0,l.Sv)(e);T(t.basicId)}},P=async(e,t,a)=>{if(e&&t){let n=(0,i.jE)("cmplist"),s=Object.assign({},{data:{},cmpid:e.trim(),lnid:t.sub.trim()});if(a&&(s.data=JSON.parse('{"ref":"'.concat(a,'"}'))),n){let t=n.find(t=>t.cmpid===e);t||(n.push(s),(0,i.w4)("cmplist",n,i.Hk),await G([{event_name:"view",event_value:1,data:JSON.stringify(s.data),line_id:s.lnid.trim(),camp_id:s.cmpid.trim()}]))}else{(0,i.w4)("cmplist",[],i.Hk);let t=(0,i.jE)("cmplist"),a=t.find(t=>t.cmpid===e);a||(t.push(s),(0,i.w4)("cmplist",t,i.Hk),await G([{event_name:"view",event_value:1,data:JSON.stringify(s.data),line_id:s.lnid.trim(),camp_id:s.cmpid.trim()}]))}}},G=async e=>{let{error:t}=await Z.from("reports").insert(e).select();if(t){alert("insertDB "+t.message);return}};return t.query.lfid||t.query.cmpid?!m&&t.query.lfid&&t.query.cmpid&&!S?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{className:"text-sm text-red-400 text-center mt-[20%]",children:"ไม่สามารถใช้งานได้กรุณาเปิดใน Line เท่านั้น"})}):t.query.lfid&&!N&&m&&!g?(0,n.jsxs)("div",{className:"max-w-md mx-auto min-h-screen flex flex-col justify-center",children:[(0,n.jsx)("h1",{className:"text-center text-gray-500 mx-4",children:"คุณบล็อคหรือยังไม่ได้เพิ่มเราเป็นเพื่อน กดเพิ่มเพื่อนหรือปลดบล็อคก่อนจึงจะรับสิทธิ์ได้"}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsxs)("button",{onClick:()=>t.push("https://line.me/R/ti/p/".concat(L?encodeURI(L):null)),className:"flex items-center px-4 py-3 rounded-md bg-green-500 text-gray-100 my-4",children:["เพิ่มเพื่อนหรือปลดบล็อค",(0,n.jsx)("img",{className:"mx-2 w-6 h-6",alt:"svgImg",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjBweCIgeT0iMHB4Igp3aWR0aD0iNDgiIGhlaWdodD0iNDgiCnZpZXdCb3g9IjAgMCAxNzIgMTcyIgpzdHlsZT0iIGZpbGw6IzAwMDAwMDsiPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIGZvbnQtZmFtaWx5PSJub25lIiBmb250LXdlaWdodD0ibm9uZSIgZm9udC1zaXplPSJub25lIiB0ZXh0LWFuY2hvcj0ibm9uZSIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0wLDE3MnYtMTcyaDE3MnYxNzJ6IiBmaWxsPSJub25lIj48L3BhdGg+PGcgaWQ9Im9yaWdpbmFsLWljb24iIGZpbGw9IiNmZmZmZmYiPjxwYXRoIGQ9Ik04Mi40NDQ2NiwxNy45MTY2N2MtNDAuODc3NTMsMCAtNzUuMjU3LDI3LjA1NzAzIC03NS4yNTcsNjEuNzYzNTFjMCwzMC45NTI0OSAyNy4yMzg2OCw1Ni4wNzI4MSA2Mi43MDgzMyw2MC45MDI2N2MwLjgxNjA5LDAuMTc3MTQgMS42ODk3MSwwLjQ2MTM2IDIuMjQ2NTgsMC43MDY4N2MtMC4wNTI5MiwwLjMwNjIzIDAuMDczMDUsMS43MjU4MyAtMC4wOTc5OCwzLjAyMzQ0djAuMDA3Yy0wLjA0NjA1LDAuMjc2MTMgLTAuODA0MTQsNC44MDE3MSAtMC45NjU4Miw1Ljc0NTkzbDAuMDA3LC0wLjAwN2MtMC4yNjkxOCwxLjU1MTY3IC0xLjEzMTk2LDQuMTQ0NDYgMS4yNzM3Niw3Ljc4MjU1YzEuMjAyODYsMS44MTkwNSAzLjkxMzEzLDMuMzYzODkgNi4zNDA4MiwzLjQwODM3YzIuNDI3NjksMC4wNDQ0NyA0LjQ2NTIxLC0wLjc1MzQ3IDYuNjk3NzUsLTEuOTgwNjNjMTYuMjk3MDgsLTguOTYxNTkgMzQuMDAzNTIsLTE5LjA3NCA0Ny45NTUwOCwtMzEuNzc0MDljMTMuOTUxNTYsLTEyLjcwMDA4IDI0LjMzNDQ3LC0yOC40NTQ5OSAyNC4zMzQ0NywtNDcuODE1MWMtMC4wMDAxOCwtMzQuNzA1MjUgLTM0LjM2NTQ3LC02MS43NjM1MSAtNzUuMjQzLC02MS43NjM1MXpNODIuNDQ0NjYsMjguNjY2NjdjMzYuMTcxMzEsMCA2NC40OTMsMjMuNTMzNTggNjQuNDkzLDUxLjAxMzUxYzAsMTUuNTU5NDcgLTguMTM3NzYsMjguMzE4OTQgLTIwLjgyMTEzLDM5Ljg2NDU4Yy0xMi4xNjIxNywxMS4wNzEyMSAtMjguMzM4NTcsMjAuNTM5MjQgLTQzLjkwMjgzLDI5LjE0MjU4YzAuMjA2MTgsLTEuMjM0NDIgMC40NjE5MiwtMi43Nzg0OCAwLjQ2MTkyLC0yLjc3ODQ4bDAuMDE0LC0wLjA4Mzk5bDAuMDE0LC0wLjA4Mzk4YzAuMjY4ODIsLTIuMDE2MjggMS4wMjA5MSwtNS4wNDEzMiAtMC41NTk5LC04Ljk5MzMzbC0wLjAwNywtMC4wMDd2LTAuMDA3Yy0xLjE5NTM3LC0yLjk1NTUzIC0zLjQwODY1LC00LjI0MDIyIC01LjE3OTA0LC01LjA4ODA1Yy0xLjc3MDM4LC0wLjg0Nzg0IC0zLjQ0NTgzLC0xLjI4Mzk1IC00LjgzNjEsLTEuNTgxN2wtMC4yMDk5NiwtMC4wNDE5OWwtMC4yMTY5NiwtMC4wMjc5OWMtMzEuNDkxNDQsLTQuMTQzMjQgLTUzLjc1NywtMjUuNjM0MzYgLTUzLjc1NywtNTAuMzEzNjRjMCwtMjcuNDc4NjkgMjguMzM1NywtNTEuMDEzNTEgNjQuNTA3LC01MS4wMTM1MXpNNjUuNjk2NzgsNjEuNDA2NThjLTIuMDIxLDAgLTMuNjY3MzIsMS42MzI2NiAtMy42NjczMiwzLjYzOTMydjI3LjU2Nzg3YzAsMi4wMTAyNSAxLjY0MjczLDMuNjM5MzIgMy42NjczMiwzLjYzOTMyYzIuMDIxLDAgMy42NjczMiwtMS42MzI2NiAzLjY2NzMyLC0zLjYzOTMydi0yNy41Njc4N2MwLC0yLjAwNjY3IC0xLjY0Mjc0LC0zLjYzOTMyIC0zLjY2NzMyLC0zLjYzOTMyek03OC4zMDg0Myw2MS40MDY1OGMtMC4zOTQxNywwIC0wLjc4ODk1LDAuMDYzNTUgLTEuMTY4NzgsMC4xODg5NmMtMS40OTc4MywwLjQ5ODA4IC0yLjUwNTUzLDEuODg0NDQgLTIuNTA1NTMsMy40NTAzNnYyNy41Njc4N2MwLDIuMDEwMjUgMS42NDk3MywzLjYzOTMyIDMuNjc0MzIsMy42MzkzMmMyLjAyODE3LDAgMy42NzQzMSwtMS42MzI2NiAzLjY3NDMxLC0zLjYzOTMydi0xNy4wNDg4M2wxNC4yNDIzNSwxOS4yMzI0MmMwLjY4OCwwLjkxMDE3IDEuNzg1NzksMS40NTU3MyAyLjkzMjQ1LDEuNDU1NzNjMC4zOTA1OCwwIDAuNzgxOTUsLTAuMDYzNTUgMS4xNjE3OCwtMC4xODg5NmMxLjUwNSwtMC40OTA5MiAyLjUxMjUzLC0xLjg3NzI4IDIuNTEyNTMsLTMuNDUwMzZ2LTI3LjU3NDg3YzAsLTIuMDA2NjcgLTEuNjQyNzQsLTMuNjMyMzIgLTMuNjY3MzIsLTMuNjMyMzJjLTIuMDI0NTgsMCAtMy42NzQzMSwxLjYyNTY2IC0zLjY3NDMxLDMuNjMyMzJ2MTcuMDYyODJsLTE0LjI0OTM1LC0xOS4yMzk0MmMtMC42ODgsLTAuOTEwMTcgLTEuNzg5MzcsLTEuNDU1NzMgLTIuOTMyNDUsLTEuNDU1NzN6TTQxLjA4OTM2LDYxLjQxMzU3Yy0yLjAyMSwwIC0zLjY2NzMyLDEuNjI1NjYgLTMuNjY3MzIsMy42MzIzMnYyNy41NzQ4N2MwLDIuMDEwMjUgMS42NDI3NCwzLjYzOTMyIDMuNjY3MzIsMy42MzkzMmgxMy44OTk0MWMyLjAyNDU4LDAgMy42NjM5LC0xLjYzOTY1IDMuNjYwMzIsLTMuNjQ2MzJjMCwtMi4wMDY2NyAtMS42MzU3NCwtMy42MzkzMiAtMy42NjAzMiwtMy42MzkzMmgtMTAuMjM5MXYtMjMuOTI4NTVjMCwtMi4wMDY2NyAtMS42MzU3MywtMy42MzIzMiAtMy42NjAzMiwtMy42MzIzMnpNMTExLjQyNjI3LDYxLjQxMzU3Yy0yLjAyMSwwIC0zLjY2NzMyLDEuNjMyNjYgLTMuNjY3MzIsMy42MzkzMnYwLjAwN3YxMy43NjY0NHYwLjAwN3YwLjAwN3YxMy43NzM0NGMwLDIuMDEwMjUgMS42NDk5LDMuNjM5MzIgMy42NjczMiwzLjYzOTMyaDEzLjg5OTQxYzIuMDI0NTgsMCAzLjY3NDMyLC0xLjYzMjY2IDMuNjc0MzIsLTMuNjM5MzJjMCwtMi4wMDY2NyAtMS42NDk3MywtMy42MzkzMiAtMy42NzQzMiwtMy42MzkzMmgtMTAuMjMyMDl2LTYuNTA4NzloMTAuMjMyMDljMi4wMjgxNywwIDMuNjc0MzIsLTEuNjMyNjYgMy42NzQzMiwtMy42MzkzMmMwLC0yLjAxMDI1IC0xLjY0OTczLC0zLjYzOTMyIC0zLjY3NDMyLC0zLjYzOTMydjAuMDE0aC0xMC4yMzIwOXYtNi41MDg3OWgxMC4yMzIwOWMyLjAyODE3LDAgMy42NzQzMiwtMS42MzI2NiAzLjY3NDMyLC0zLjYzOTMyYzAsLTIuMDA2NjcgLTEuNjQ5NzMsLTMuNjM5MzIgLTMuNjc0MzIsLTMuNjM5MzJ6Ij48L3BhdGg+PC9nPjwvZz48L3N2Zz4="})]})})]}):(0,n.jsxs)(n.Fragment,{children:[t.query.lfid&&!N&&m&&g&&(0,n.jsxs)("div",{className:"mx-auto max-w-md bg-gray-200 min-h-screen",children:[S&&(0,n.jsx)(z.Z,{}),!p&&(0,n.jsxs)("div",{class:"flex flex-col items-center pt-32",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"96",height:"96",fill:"#1fa83a",viewBox:"0 0 256 256",children:(0,n.jsx)("path",{d:"M225,80.4,183.6,39a24,24,0,0,0-33.94,0L31,157.66a24,24,0,0,0,0,33.94l30.06,30.06A8,8,0,0,0,66.74,224H216a8,8,0,0,0,0-16h-84.7L225,114.34A24,24,0,0,0,225,80.4ZM108.68,208H70.05L42.33,180.28a8,8,0,0,1,0-11.31L96,115.31,148.69,168Zm105-105L160,156.69,107.31,104,161,50.34a8,8,0,0,1,11.32,0l41.38,41.38a8,8,0,0,1,0,11.31Z"})}),(0,n.jsxs)("p",{className:"text-sm text-center text-gray-600",children:["ไม่พบโปรโมชั่นที่คุณต้องการ",(0,n.jsx)("br",{}),"แคมเปญนี้หมดเวลาหรือถูกลบไปแล้ว"]})]}),!S&&p&&D<p.content.share&&!C&&t.query.cmpid===b&&(0,n.jsx)(o,{lineProfile:u,campaigndata:p,shareState:{setShareCount:I,shareCount:D},cmpidState:{setCmpidLocal:Y,cmpidLocal:b},shareTargetPicker:liff.shareTargetPicker}),!S&&p&&D>=p.content.share&&t.query.cmpid===b&&!C&&(0,n.jsx)(y,{campaigndata:p,lineProfile:u,iscompleteState:{isComplete:C,setisComplete:A}}),!S&&p&&D>=p.content.share&&t.query.cmpid===b&&C&&(0,n.jsx)(h,{lineProfile:u,campaigndata:p,name:O,phone:k}),!1]}),N&&(0,n.jsx)("div",{className:"mx-auto max-w-md min-h-screen flex flex-col justify-center",children:(0,n.jsx)("p",{className:"text-xs text-red-400 text-center border border-red-300 p-4",children:N.message})})]}):(0,n.jsx)(z.Z,{})}},6982:function(e){e.exports={style:{fontFamily:"'__Anuphan_87802c'",fontStyle:"normal"},className:"__className_87802c"}},5383:function(e){e.exports={style:{fontFamily:"'__Anuphan_87802c'",fontStyle:"normal"},className:"__className_87802c"}},6248:function(e){e.exports={style:{fontFamily:"'__Anuphan_87802c'",fontStyle:"normal"},className:"__className_87802c"}},4298:function(e,t,a){a(5442)},7632:function(e,t,a){"use strict";let n;a.d(t,{Z:function(){return M}});let s="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var c={randomUUID:s};let i=new Uint8Array(16);function l(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}let r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));var M=function(e,t,a){if(c.randomUUID&&!t&&!e)return c.randomUUID();e=e||{};let n=e.random||(e.rng||l)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=n[e];return t}return function(e,t=0){return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}(n)}}},function(e){e.O(0,[296,743,464,925,774,888,179],function(){return e(e.s=7414)}),_N_E=e.O()}]);