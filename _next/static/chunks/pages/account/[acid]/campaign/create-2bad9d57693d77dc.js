(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{1600:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/[acid]/campaign/create",function(){return s(2838)}])},5825:function(e,a,s){"use strict";s.d(a,{Z:function(){return c}});var t=s(5893),l=s(872),n=s.n(l),r=s(5697),i=s.n(r);function c(e){let{onClick:a,disabled:s,className:l,children:n,type:r}=e;return(0,t.jsx)("button",{className:l,onClick:a,disabled:s,type:r,children:n})}c.propTypes={onClick:i().func,disabled:i().bool,className:i().string,type:i().string,children:i().node.isRequired},c.defaultProps={isButton:!1,onClick:()=>{},disabled:!1,className:"py-2 px-4 text-white text-base bg-primary-600 border-2 border-primary-600 rounded cursor-pointer ".concat(n().className),children:"Button",type:"button"}},853:function(e,a,s){"use strict";s.d(a,{Z:function(){return S}});var t=s(5893),l=s(9084),n=s.n(l),r=s(3977),i=s.n(r),c=s(7294),o=s(1163),d=s(4053),x=s(1664),m=s.n(x);let u=[{label:"บัญชีของฉัน",link:"/"}];function p(){let e=(0,o.useRouter)(),[a,s]=(0,c.useState)(!1),{supabaseClient:l,session:r}=(0,d.useSessionContext)(),{auth:x}=l,p=r?r.user:null,h=async()=>{s(!a);let{error:e}=await x.signOut();e&&console.log(e)};return(0,t.jsxs)("header",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"px-8 min-h-[64px] flex items-center justify-between border-b",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold ".concat(n().className),children:"LINE SHARE"}),(0,t.jsxs)("div",{className:"flex flex-col relative",children:[(0,t.jsxs)("div",{onClick:()=>{s(!a)},className:"flex items-center cursor-pointer ".concat(n().className),children:[p&&p.email,(0,t.jsx)("svg",{className:"w-4 h-4 ml-2","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),(0,t.jsx)("div",{className:"z-10 absolute right-0 top-[110%] bg-white divide-y divide-gray-100 rounded-lg shadow w-44 ".concat(a?"block":"hidden"),children:(0,t.jsx)("ul",{className:"py-2 text-sm text-gray-700",children:(0,t.jsx)("li",{children:(0,t.jsxs)("span",{onClick:h,className:"flex px-4 py-2 hover:bg-gray-100 cursor-pointer gap-2 ".concat(i().className," items-center"),children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#21a93a",viewBox:"0 0 256 256",children:(0,t.jsx)("path",{d:"M116,216a12,12,0,0,1-12,12H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28h56a12,12,0,0,1,0,24H52V204h52A12,12,0,0,1,116,216Zm108.49-96.49-40-40a12,12,0,0,0-17,17L187,116H104a12,12,0,0,0,0,24h83l-19.52,19.51a12,12,0,0,0,17,17l40-40A12,12,0,0,0,224.49,119.51Z"})}),"ออกจากระบบ"]})})})})]})]}),(0,t.jsx)("div",{className:"px-8 flex items-center border-b",children:(0,t.jsx)("nav",{children:(0,t.jsx)("ul",{className:"flex gap-4 ".concat(i().className),children:e.pathname.includes("/admin")?(0,t.jsx)("li",{className:"px-4 py-3 active border-b-4 border-primary-600",children:(0,t.jsx)(m(),{href:"/admin/settings/account",children:"ตั้งค่า"})}):u.map((a,s)=>(0,t.jsx)("li",{className:"px-4 py-3 ".concat(e.pathname===a.link?"active border-b-4 border-primary-600":""),children:(0,t.jsx)(m(),{href:a.link,children:a.label})},s))})})})]})}function h(){return(0,t.jsx)("footer",{className:"px-4 flex items-center border-t",children:(0,t.jsxs)("p",{className:"text-xs text-gray-400 my-2",children:["\xa9",new Date().getFullYear()," Mindedge Co., Ltd."]})})}var g=s(3415),f=s.n(g),v=s(5675),b=s.n(v),j={src:"/_next/static/media/i-link-simple.488b4213.svg",height:32,width:32,blurWidth:0,blurHeight:0},N={src:"/_next/static/media/i-list-dashes.99f19d3d.svg",height:32,width:32,blurWidth:0,blurHeight:0},y={src:"/_next/static/media/i-megaphone.6b0241ef.svg",height:32,width:32,blurWidth:0,blurHeight:0},w={src:"/_next/static/media/i-magic-wand.50682af5.svg",height:32,width:32,blurWidth:0,blurHeight:0},_={src:"/_next/static/media/i-user-circle.e159f561.svg",height:32,width:32,blurWidth:0,blurHeight:0};function k(){let e=(0,o.useRouter)(),[a,s]=(0,c.useState)(""),l=window.sessionStorage.getItem("acid"),[n,r]=(0,c.useState)({Settings:[{id:"link-account",label:"ลิงก์บัญชี",link:"/settings/link-account",image:j}],Account:[{id:"home-account",label:"Dashboard",link:"/account/".concat(l),image:N},{id:"campaign",label:"แคมเปญทั้งหมด",link:"/account/".concat(l,"/campaign"),image:y},{id:"insight",label:"ข้อมูลเชิงลึก",link:"/account/".concat(l,"/campaign/insight"),image:w}]});return(0,c.useEffect)(()=>{e.pathname.includes("/account")&&!e.pathname.includes("/account/create")?s("Account"):s("")},[e.pathname]),(0,t.jsx)("nav",{className:"md:w-[280px] p-11 bg-gray-50 border-r border-gray-200",children:e.pathname.includes("/admin")?(0,t.jsxs)("ul",{className:"flex flex-col gap-4 ".concat(f().className),children:[(0,t.jsx)("li",{children:(0,t.jsxs)(m(),{href:"/admin/settings/account",className:"flex gap-2",children:[(0,t.jsx)(b(),{src:j,width:24,height:24,alt:"Account"}),"บัญชีทางการ"]})}),(0,t.jsx)("li",{children:(0,t.jsxs)(m(),{href:"/admin/settings/users",className:"flex gap-2",children:[(0,t.jsx)(b(),{src:_,width:24,height:24,alt:"Campaign"}),"ผู้ใช้งาน"]})})]}):""!==a&&(0,t.jsx)("ul",{className:"flex flex-col gap-4 ".concat(f().className),children:n[a].map((e,a)=>(0,t.jsx)("li",{children:(0,t.jsxs)(m(),{href:e.link,className:"flex gap-2",children:[(0,t.jsx)(b(),{src:e.image,width:24,height:24,alt:"Insight"}),e.label]})},a))})})}var C=s(1678),F=s.n(C),R=s(5825);function q(e){return e.setButton&&e.setButton.isButton,(0,t.jsxs)("section",{className:"flex justify-between mb-10",children:[(0,t.jsx)("h1",{className:"text-3xl ".concat(F().className),children:e.setPageTitle}),e.setButton&&(0,t.jsx)("div",{children:(0,t.jsx)(R.Z,{onClick:e.setButton.onClick,disabled:e.setButton.disabled,className:e.setButton.className,children:e.setButton.children})})]})}function S(e){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{}),(0,t.jsxs)("main",{className:"flex flex-row no-warp items-stretch min-h-[calc(100vh-146px)]",children:[(0,t.jsx)(k,{}),(0,t.jsxs)("div",{className:"content w-full max-w-[1160px] p-11",children:[(0,t.jsx)(q,{setPageTitle:e.setPageTitle,setButton:e.setButton}),e.children]})]}),(0,t.jsx)(h,{})]})}},2838:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return R}});var t=s(5893),l=s(5656),n=s.n(l),r=s(7294),i=s(2175),c=s(1120),o=s.n(c),d=s(4053),x=s(6310),m=s(853),u=s(4512),p=s.n(u);function h(e){let{currentStep:a}=e,s=["Flex message","ข้อมูลแคมเปญ","สรุป"],l=s.map((e,l)=>(0,t.jsxs)("div",{className:l!==s.length-1?"w-full flex items-center":"flex items-center",children:[(0,t.jsxs)("div",{className:"relative flex flex-col items-center text-gray-400",children:[(0,t.jsx)("div",{className:"rounded-full transition duration-500 ease-in-out border-2 ".concat(0==l&&2==a||0==l&&3==a||1==l&&3==a?"border-primary-500 bg-primary-500":"text-gray-400","  h-12 w-12 flex items-center justify-center py-3  ").concat(0==l&&1==a||1==l&&2==a||2==l&&3==a?"border-primary-500 bg-primary-500 text-white font-bold":""),children:0==l&&2==a||0==l&&3==a||1==l&&3==a?(0,t.jsx)("span",{className:"text-white font-bold text-xl",children:"✓"}):l+1}),(0,t.jsx)("div",{className:"absolute top-0 text-center mt-16 w-32 text-xs font-medium uppercase ".concat(0==l&&1==a||0==l&&2==a||0==l&&3==a||1==l&&2==a||1==l&&3==a||2==l&&3==a?"text-gray-900":"text-gray-400"," ").concat(p().className),children:e})]}),(0,t.jsx)("div",{className:"flex-auto border-t-2 transition duration-500 ease-in-out border-gray-300 "})]},l));return(0,t.jsx)("div",{className:"mx-4 p-4 flex justify-between items-center",children:l})}var g=s(5213),f=s.n(g);function v(e){let{formMik:a}=e,s=e=>{let a=new Date,s=e.type.split("/"),t=e.slice(0,e.size,e.type),l=new File([t],"camp".concat(a.valueOf(),".").concat(s[1]),{type:e.type});return l};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-1/2 p-4 min-h-[400px]",children:(0,t.jsx)("div",{id:"canvas-step-1",className:"bg-[#849EBF] p-4 h-full rounded ".concat(f().className),children:(0,t.jsxs)("div",{className:"flex flex-col mx-auto gap-2 rounded-xl bg-white max-w-[320px]",children:[(0,t.jsx)("figure",{className:" w-full min-h-[320px] rounded-xl bg-gray-300",children:(0,t.jsx)("img",{alt:"Cover",className:"rounded-xl",src:""!==a.values.cover?URL.createObjectURL(a.values.cover):"https://placehold.co/1080x1080",width:320,height:320})}),(0,t.jsxs)("div",{className:"flex gap-4 py-4 px-6",children:[(0,t.jsx)("figure",{className:"w-[60px] h-[60px] rounded-full bg-gray-300",children:(0,t.jsx)("img",{className:"rounded-full",alt:"Profile",src:""!==a.values.profile?URL.createObjectURL(a.values.profile):"https://placehold.co/60x60",width:60,height:60})}),(0,t.jsxs)("div",{className:"flex flex-col justify-stretch flex-grow",children:[(0,t.jsx)("h2",{className:"text-base",children:""!==a.values.account?a.values.account:"Account"}),(0,t.jsx)("p",{className:"text-xs",children:""!==a.values.description?a.values.description:"Description"}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:[""!==a.values.like?a.values.like:"100k"," ","likes"]}),(0,t.jsx)("button",{className:"bg-green-500 py-2 px-4 rounded-xl text-white mt-2",children:""!==a.values.button?a.values.button:"Button Name"})]})]})]})})}),(0,t.jsx)("div",{className:"w-1/2 p-4",children:(0,t.jsx)("div",{className:"form-container",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{htmlFor:"flex-cover",className:"font-medium",children:"Cover [1:1]"}),(0,t.jsx)("input",{type:"file",id:"flex-cover",name:"cover",accept:".png,.jpg,.jpeg,.gif",className:"bg-gray-50 border p-2 rounded",onChange:e=>{if(!e.target.files.length)return;let t=s(e.target.files[0]);a.setFieldValue("cover",t)}}),a.errors.cover?(0,t.jsx)("div",{className:"text-red-500 text-xs",children:a.errors.cover}):null]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{htmlFor:"flex-profile",className:"font-medium",children:"Profile [1:1]"}),(0,t.jsx)("input",{type:"file",id:"flex-profile",name:"profile",accept:".png,.jpg,.jpeg,.gif",className:"bg-gray-50 border p-2 rounded",onChange:e=>{if(!e.target.files.length)return;let t=s(e.target.files[0]);a.setFieldValue("profile",t)}}),a.errors.profile?(0,t.jsx)("div",{className:"text-red-500 text-xs",children:a.errors.profile}):null]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{htmlFor:"flex-account",className:"font-medium",children:"Account"}),(0,t.jsx)("input",{type:"text",id:"flex-account",name:"account",className:"border p-2 rounded",value:a.values.account,onChange:a.handleChange}),a.errors.account?(0,t.jsx)("div",{className:"text-red-500 text-xs",children:a.errors.account}):null]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{htmlFor:"flex-description",className:"font-medium",children:"Description"}),(0,t.jsx)("input",{type:"textarea",id:"flex-description",name:"description",className:"border p-2 rounded",value:a.values.description,onChange:a.handleChange}),a.errors.description?(0,t.jsx)("div",{className:"text-red-500 text-xs",children:a.errors.description}):null]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{htmlFor:"flex-like",className:"font-medium",children:"Like count"}),(0,t.jsx)("input",{type:"text",id:"flex-like",name:"like",className:"border p-2 rounded",value:a.values.like,onChange:a.handleChange}),a.errors.like?(0,t.jsx)("div",{className:"text-red-500 text-xs",children:a.errors.like}):null]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{htmlFor:"flex-button",className:"font-medium",children:"Button"}),(0,t.jsx)("input",{type:"text",id:"flex-button",name:"button",className:"border p-2 rounded",value:a.values.button,onChange:a.handleChange}),a.errors.button?(0,t.jsx)("div",{className:"text-red-500 text-xs",children:a.errors.button}):null]})]})})})]})}var b=s(2046),j=s.n(b),N=s(4007),y=s.n(N);function w(e){let{formMik:a}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-1/2 p-4 min-h-[400px]",children:(0,t.jsx)("div",{id:"canvas-step-1",className:"bg-[#849EBF] px-4 py-8 h-full rounded ".concat(y().className),children:(0,t.jsxs)("div",{className:"flex flex-col mx-auto items-center text-center rounded-xl bg-white max-w-[320px]",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center p-2",children:[(0,t.jsx)("figure",{className:"w-14 h-14 rounded-full bg-gray-300 mt-[-28px]",children:(0,t.jsx)("img",{className:"rounded-full w-14 h-14",alt:"line profile",src:"https://placehold.co/42x42"})}),(0,t.jsx)("h1",{className:"font-bold",children:"สวัสดีคุณ XXX"})]}),(0,t.jsx)("figure",{className:" w-full min-h-[320px] bg-gray-300",children:(0,t.jsx)("img",{alt:"",src:""!==a.values.cover?URL.createObjectURL(a.values.cover):"https://placehold.co/1080x1080"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 py-4 px-6 w-full",children:[(0,t.jsx)("p",{className:"text-xs",children:"แชร์แล้ว x คน"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 whitespace-pre-wrap break-words",children:""!==a.values.descriptioncampaign?a.values.descriptioncampaign:"เพิ่มรายละเอียดแคมเปญ"}),(0,t.jsx)("h2",{className:"text-xs font-bold text-center mt-4",children:"เงื่อนไข"}),(0,t.jsx)("p",{className:"text-xs ".concat(y().className," text-left break-words whitespace-pre-wrap text-gray-500"),children:""!==a.values.privacy?a.values.privacy:"เพิ่มเงื่อนไขแคมเปญ"}),(0,t.jsx)("div",{className:"flex mx-[-1.5rem] mb-[-1.5rem] mt-2",children:(0,t.jsx)("button",{className:"bg-green-500 py-2 px-4 rounded-xl rounded-t-none text-white w-full",children:""!==a.values.buttonshare?a.values.buttonshare:"button"})})]})]})})}),(0,t.jsx)("div",{className:"w-1/2 p-4",children:(0,t.jsx)("div",{className:"form-container",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 ".concat(j().className),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{htmlFor:"page-name",className:"font-medium",children:"ชื่อแคมเปญ"}),(0,t.jsx)("input",{type:"text",id:"page-name",name:"name",className:"border p-2 rounded",value:a.values.name,onChange:a.handleChange}),a.errors.name?(0,t.jsx)("div",{className:"text-red-500 text-xs",children:a.errors.name}):null]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{htmlFor:"page-description",className:"font-medium",children:"รายละเอียดแคมเปญ"}),(0,t.jsx)("textarea",{id:"page-description",name:"descriptioncampaign",className:"border p-2 rounded",rows:5,value:a.values.descriptioncampaign,onChange:a.handleChange}),a.errors.descriptioncampaign?(0,t.jsx)("div",{className:"text-red-500 text-xs",children:a.errors.descriptioncampaign}):null]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{htmlFor:"page-privacy",className:"font-medium",children:"เงื่อนไขแคมเปญ"}),(0,t.jsx)("textarea",{rows:"5",id:"page-privacy",name:"privacy",className:"border p-2 rounded",value:a.values.privacy,onChange:a.handleChange}),a.errors.privacy?(0,t.jsx)("div",{className:"text-red-500 text-xs",children:a.errors.privacy}):null]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{htmlFor:"page-share",className:"font-medium",children:"จำนวนการแชร์ (ครั้ง)"}),(0,t.jsx)("input",{type:"number",id:"page-share",name:"share",className:"border p-2 rounded",value:a.values.share,onChange:a.handleChange}),a.errors.share?(0,t.jsx)("div",{className:"text-red-500 text-xs",children:a.errors.share}):null]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{htmlFor:"page-button",className:"font-medium",children:"ปุ่ม"}),(0,t.jsx)("input",{type:"text",id:"page-button",name:"buttonshare",className:"border p-2 rounded",value:a.values.buttonshare,onChange:a.handleChange}),a.errors.buttonshare?(0,t.jsx)("div",{className:"text-red-500 text-xs",children:a.errors.buttonshare}):null]})]})})})]})}var _=s(7291),k=s.n(_);function C(e){let{formMik:a}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-1/2 p-4 min-h-[400px]",children:(0,t.jsx)("div",{id:"canvas-step-1",className:"bg-[#849EBF] p-4 h-full rounded ".concat(k().className),children:(0,t.jsxs)("div",{className:"flex flex-col mx-auto gap-2 rounded-xl bg-white max-w-[320px]",children:[(0,t.jsx)("figure",{className:" w-full min-h-[320px] rounded-xl bg-gray-300",children:(0,t.jsx)("img",{alt:"Cover",className:"rounded-xl",src:""!==a.values.cover?URL.createObjectURL(a.values.cover):"https://placehold.co/1080x1080",width:320,height:320})}),(0,t.jsxs)("div",{className:"flex gap-4 py-4 px-6",children:[(0,t.jsx)("figure",{className:"w-[60px] h-[60px] rounded-full bg-gray-300",children:(0,t.jsx)("img",{className:"rounded-full",alt:"Profile",src:""!==a.values.profile?URL.createObjectURL(a.values.profile):"https://placehold.co/60x60",width:60,height:60})}),(0,t.jsxs)("div",{className:"flex flex-col justify-stretch flex-grow",children:[(0,t.jsx)("h2",{className:"text-base",children:""!==a.values.account?a.values.account:"Account"}),(0,t.jsx)("p",{className:"text-xs",children:""!==a.values.description?a.values.description:"Description"}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:[""!==a.values.like?a.values.like:"100k"," ","likes"]}),(0,t.jsx)("button",{className:"bg-green-500 py-2 px-4 rounded-xl text-white mt-2",children:""!==a.values.button?a.values.button:"Button Name"})]})]})]})})}),(0,t.jsx)("div",{className:"w-1/2 p-4 min-h-[400px]",children:(0,t.jsx)("div",{id:"canvas-step-1",className:"bg-[#849EBF] px-4 py-8 h-full rounded ".concat(k().className),children:(0,t.jsxs)("div",{className:"flex flex-col mx-auto items-center text-center rounded-xl bg-white max-w-[320px]",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center p-2",children:[(0,t.jsx)("figure",{className:"w-14 h-14 rounded-full bg-gray-300 mt-[-28px]",children:(0,t.jsx)("img",{className:"rounded-full w-14 h-14",alt:"line profile",src:"https://placehold.co/42x42"})}),(0,t.jsx)("h1",{className:"font-bold",children:"สวัสดีคุณ XXX"})]}),(0,t.jsx)("figure",{className:" w-full min-h-[320px] bg-gray-300",children:(0,t.jsx)("img",{alt:"",src:""!==a.values.cover?URL.createObjectURL(a.values.cover):"https://placehold.co/1080x1080"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 py-4 px-6 w-full",children:[(0,t.jsx)("p",{className:"text-xs",children:"แชร์แล้ว x คน"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 whitespace-pre-wrap break-words",children:""!==a.values.descriptioncampaign?a.values.descriptioncampaign:"เพิ่มรายละเอียดแคมเปญ"}),(0,t.jsx)("h2",{className:"text-xs font-bold text-center mt-4",children:"เงื่อนไข"}),(0,t.jsx)("p",{className:"text-xs ".concat(k().className," text-left break-words whitespace-pre-wrap text-gray-500"),children:""!==a.values.privacy?a.values.privacy:"เพิ่มเงื่อนไขแคมเปญ"}),(0,t.jsx)("div",{className:"flex mx-[-1.5rem] mb-[-1.5rem] mt-2",children:(0,t.jsx)("button",{className:"bg-green-500 block py-2 px-4 rounded-xl rounded-t-none text-white w-full",children:(0,t.jsx)("span",{children:""!==a.values.buttonshare?a.values.buttonshare:"button"})})})]})]})})})]})}var F=s(5825);function R(e){let{router:a}=e,[s,l]=(0,r.useState)(1),[c,u]=(0,r.useState)(!1),p=(0,d.useSupabaseClient)(),g=(0,i.TA)({initialValues:{cover:"",profile:"",account:"",description:"",like:"",button:"",descriptioncampaign:"",share:"",buttonshare:"",privacy:"",campaignimage:"",name:""},validationSchema:x.Ry().shape({cover:x.nK().required("File image is required"),profile:x.nK().required("File image is required"),account:x.Z_().required("Required"),description:x.Z_().required("Required"),like:x.Z_().required("Required"),button:x.Z_().required("Required"),descriptioncampaign:x.Z_().required("Required"),share:x.Z_().required("Required"),buttonshare:x.Z_().required("Required"),privacy:x.Z_().required("Required"),campaignimage:x.nK().required("File image is required"),name:x.Z_().required("Required")}),onSubmit:async e=>{let s="https://gssebjvjdjaurqcljsfs.supabase.co",t=window.sessionStorage.getItem("acid"),l=window.sessionStorage.getItem("lfid");if(e.campaignimage&&e.profile&&e.cover){let n=await p.storage.from("campaigns").upload("content/".concat(e.campaignimage.name),e.campaignimage),r=await p.storage.from("campaigns").upload("content/".concat(e.profile.name),e.profile),i=await p.storage.from("campaigns").upload("content/".concat(e.cover.name),e.cover);if(!n.error&&!r.error&&!i.error){let c=s+"/storage/v1/object/public/campaigns/"+n.data.path,o=s+"/storage/v1/object/public/campaigns/"+r.data.path,d=s+"/storage/v1/object/public/campaigns/"+i.data.path,{data:x,error:m}=await p.from("campaigns").insert({name:e.name,image_url:c,content:{account:e.account,descriptioncampaign:e.descriptioncampaign,privacy:e.privacy,cover:d,profile:o,description:e.description,like:e.like,button:e.button,share:e.share,buttonshare:e.buttonshare},flexmsg:{},shop_id:t}).select();if(!m){await p.from("campaigns").update({flexmsg:{type:"flex",altText:e.name,contents:{type:"bubble",body:{type:"box",layout:"vertical",contents:[{type:"box",layout:"horizontal",contents:[{type:"image",url:d,size:"full",aspectMode:"cover",aspectRatio:"1:1",gravity:"center",flex:1}]},{type:"box",layout:"horizontal",contents:[{type:"box",layout:"vertical",contents:[{type:"image",url:o,aspectMode:"cover",size:"full"}],cornerRadius:"100px",width:"72px",height:"72px"},{type:"box",layout:"vertical",contents:[{type:"text",contents:[{type:"span",text:e.account,weight:"bold",color:"#000000"}],size:"sm",wrap:!0},{type:"text",contents:[{type:"span",text:e.description,size:"xs"}],wrap:!0,size:"xxs"},{type:"box",layout:"baseline",contents:[{type:"text",text:e.like+" Like",size:"sm",color:"#bcbcbc"}],spacing:"sm",margin:"md"},{type:"button",action:{type:"uri",label:e.button,uri:"https://liff.line.me/".concat(l,"?").concat(encodeURI("cmpid=".concat(x[0].id,"&lfid=").concat(l)))},style:"primary",height:"sm",margin:"md"}]}],spacing:"xl",paddingAll:"20px"}],paddingAll:"0px"}}}}).eq("id",x[0].id),u(!1),a.back();return}u(!1),console.log(m.message)}}}}),f=(e,a)=>{for(var s=e.split(","),t=s[0].match(/:(.*?);/)[1],l=atob(s[s.length-1]),n=l.length,r=new Uint8Array(n);n--;)r[n]=l.charCodeAt(n);return new File([r],a,{type:t})};return(0,t.jsxs)(m.Z,{setPageTitle:"สร้างแคมเปญ",children:[(0,t.jsx)("div",{className:"container horizontal mt-5 mb-12",children:(0,t.jsx)(h,{currentStep:s})}),(0,t.jsxs)("form",{noValidate:!0,onSubmit:e=>{e.preventDefault(),u(!0);let a=document.getElementById("compaign-container");o()(a).then(async e=>{let a=f(e.toDataURL("image/jpeg"),"camp"+new Date().valueOf()+".jpg");await g.setFieldValue("campaignimage",a),setTimeout(()=>g.handleSubmit(),1e3)})},children:[(0,t.jsxs)("div",{id:"compaign-container",className:"flex flex-nowrap",children:[1==s&&(0,t.jsx)(v,{formMik:g}),2==s&&(0,t.jsx)(w,{formMik:g}),3==s&&(0,t.jsx)(C,{formMik:g})]}),(0,t.jsxs)("div",{className:"container flex justify-around my-8 ",children:[(0,t.jsx)("div",{className:"w-1/2",children:1!=s&&(0,t.jsx)(F.Z,{onClick:()=>{l(s-1)},className:"py-2 px-4 text-primary-600 text-base bg-white border-2 border-primary-600 rounded ".concat(n().className),children:"ย้อนกลับ"})}),(0,t.jsxs)("div",{className:"w-1/2 text-right",children:[3!=s&&(0,t.jsx)(F.Z,{onClick:async()=>{let e=await g.validateForm();1!=s||e.cover||e.profile||e.account||e.description||e.like||e.button||l(s+1),2!=s||e.name||e.descriptioncampaign||e.privacy||e.share||e.buttonshare||l(s+1)},children:"ถัดไป"}),3==s&&(0,t.jsx)(F.Z,{type:"submit",children:c?"กำลังสร้างแคมเปญ...":"บันทึก"})]})]})]})]})}},2046:function(e){e.exports={style:{fontFamily:"'__Anuphan_87802c'",fontStyle:"normal"},className:"__className_87802c"}},4007:function(e){e.exports={style:{fontFamily:"'__Inter_0ec1f4', '__Inter_Fallback_0ec1f4'",fontStyle:"normal"},className:"__className_0ec1f4"}},4512:function(e){e.exports={style:{fontFamily:"'__Anuphan_87802c'",fontStyle:"normal"},className:"__className_87802c"}},5213:function(e){e.exports={style:{fontFamily:"'__Inter_0ec1f4', '__Inter_Fallback_0ec1f4'",fontStyle:"normal"},className:"__className_0ec1f4"}},7291:function(e){e.exports={style:{fontFamily:"'__Inter_0ec1f4', '__Inter_Fallback_0ec1f4'",fontStyle:"normal"},className:"__className_0ec1f4"}},5656:function(e){e.exports={style:{fontFamily:"'__Anuphan_87802c'",fontStyle:"normal"},className:"__className_87802c"}}},function(e){e.O(0,[443,747,743,850,774,888,179],function(){return e(e.s=1600)}),_N_E=e.O()}]);