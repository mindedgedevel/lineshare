(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[149],{3018:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/settings/users/create",function(){return a(5343)}])},5825:function(e,s,a){"use strict";a.d(s,{Z:function(){return c}});var l=a(5893),t=a(872),n=a.n(t),i=a(5697),r=a.n(i);function c(e){let{onClick:s,disabled:a,className:t,children:n,type:i}=e;return(0,l.jsx)("button",{className:t,onClick:s,disabled:a,type:i,children:n})}c.propTypes={onClick:r().func,disabled:r().bool,className:r().string,type:r().string,children:r().node.isRequired},c.defaultProps={isButton:!1,onClick:()=>{},disabled:!1,className:"py-2 px-4 text-white text-base bg-primary-600 border-2 border-primary-600 rounded cursor-pointer ".concat(n().className),children:"Button",type:"button"}},853:function(e,s,a){"use strict";a.d(s,{Z:function(){return Z}});var l=a(5893),t=a(9084),n=a.n(t),i=a(3977),r=a.n(i),c=a(7294),d=a(1163),o=a(4053),m=a(1664),u=a.n(m);let h=[{label:"บัญชีของฉัน",link:"/"}];function x(){let e=(0,d.useRouter)(),[s,a]=(0,c.useState)(!1),{supabaseClient:t,session:i}=(0,o.useSessionContext)(),{auth:m}=t,x=i?i.user:null,p=async()=>{a(!s);let{error:e}=await m.signOut();e&&console.log(e)};return(0,l.jsxs)("header",{className:"flex flex-col",children:[(0,l.jsxs)("div",{className:"px-8 min-h-[64px] flex items-center justify-between border-b",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold ".concat(n().className),children:"LINE SHARE"}),(0,l.jsxs)("div",{className:"flex flex-col relative",children:[(0,l.jsxs)("div",{onClick:()=>{a(!s)},className:"flex items-center cursor-pointer ".concat(n().className),children:[x&&x.email,(0,l.jsx)("svg",{className:"w-4 h-4 ml-2","aria-hidden":"true",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),(0,l.jsx)("div",{className:"z-10 absolute right-0 top-[110%] bg-white divide-y divide-gray-100 rounded-lg shadow w-44 ".concat(s?"block":"hidden"),children:(0,l.jsx)("ul",{className:"py-2 text-sm text-gray-700",children:(0,l.jsx)("li",{children:(0,l.jsxs)("span",{onClick:p,className:"flex px-4 py-2 hover:bg-gray-100 cursor-pointer gap-2 ".concat(r().className," items-center"),children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#21a93a",viewBox:"0 0 256 256",children:(0,l.jsx)("path",{d:"M116,216a12,12,0,0,1-12,12H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28h56a12,12,0,0,1,0,24H52V204h52A12,12,0,0,1,116,216Zm108.49-96.49-40-40a12,12,0,0,0-17,17L187,116H104a12,12,0,0,0,0,24h83l-19.52,19.51a12,12,0,0,0,17,17l40-40A12,12,0,0,0,224.49,119.51Z"})}),"ออกจากระบบ"]})})})})]})]}),(0,l.jsx)("div",{className:"px-8 flex items-center border-b",children:(0,l.jsx)("nav",{children:(0,l.jsx)("ul",{className:"flex gap-4 ".concat(r().className),children:e.pathname.includes("/admin")?(0,l.jsx)("li",{className:"px-4 py-3 active border-b-4 border-primary-600",children:(0,l.jsx)(u(),{href:"/admin/settings/account",children:"ตั้งค่า"})}):h.map((s,a)=>(0,l.jsx)("li",{className:"px-4 py-3 ".concat(e.pathname===s.link?"active border-b-4 border-primary-600":""),children:(0,l.jsx)(u(),{href:s.link,children:s.label})},a))})})})]})}function p(){return(0,l.jsx)("footer",{className:"px-4 flex items-center border-t",children:(0,l.jsxs)("p",{className:"text-xs text-gray-400 my-2",children:["\xa9",new Date().getFullYear()," Mindedge Co., Ltd."]})})}var g=a(3415),f=a.n(g),b=a(5675),j=a.n(b),N={src:"/_next/static/media/i-link-simple.488b4213.svg",height:32,width:32,blurWidth:0,blurHeight:0},w={src:"/_next/static/media/i-list-dashes.99f19d3d.svg",height:32,width:32,blurWidth:0,blurHeight:0},v={src:"/_next/static/media/i-megaphone.6b0241ef.svg",height:32,width:32,blurWidth:0,blurHeight:0},y={src:"/_next/static/media/i-magic-wand.50682af5.svg",height:32,width:32,blurWidth:0,blurHeight:0},_={src:"/_next/static/media/i-user-circle.e159f561.svg",height:32,width:32,blurWidth:0,blurHeight:0};function k(){let e=(0,d.useRouter)(),[s,a]=(0,c.useState)(""),t=window.sessionStorage.getItem("acid"),[n,i]=(0,c.useState)({Settings:[{id:"link-account",label:"ลิงก์บัญชี",link:"/settings/link-account",image:N}],Account:[{id:"home-account",label:"Dashboard",link:"/account/".concat(t),image:w},{id:"campaign",label:"แคมเปญทั้งหมด",link:"/account/".concat(t,"/campaign"),image:v},{id:"insight",label:"ข้อมูลเชิงลึก",link:"/account/".concat(t,"/campaign/insight"),image:y}]});return(0,c.useEffect)(()=>{e.pathname.includes("/account")&&!e.pathname.includes("/account/create")?a("Account"):a("")},[e.pathname]),(0,l.jsx)("nav",{className:"md:w-[280px] p-11 bg-gray-50 border-r border-gray-200",children:e.pathname.includes("/admin")?(0,l.jsxs)("ul",{className:"flex flex-col gap-4 ".concat(f().className),children:[(0,l.jsx)("li",{children:(0,l.jsxs)(u(),{href:"/admin/settings/account",className:"flex gap-2",children:[(0,l.jsx)(j(),{src:N,width:24,height:24,alt:"Account"}),"บัญชีทางการ"]})}),(0,l.jsx)("li",{children:(0,l.jsxs)(u(),{href:"/admin/settings/users",className:"flex gap-2",children:[(0,l.jsx)(j(),{src:_,width:24,height:24,alt:"Campaign"}),"ผู้ใช้งาน"]})})]}):""!==s&&(0,l.jsx)("ul",{className:"flex flex-col gap-4 ".concat(f().className),children:n[s].map((e,s)=>(0,l.jsx)("li",{children:(0,l.jsxs)(u(),{href:e.link,className:"flex gap-2",children:[(0,l.jsx)(j(),{src:e.image,width:24,height:24,alt:"Insight"}),e.label]})},s))})})}var C=a(1678),B=a.n(C),S=a(5825);function A(e){return e.setButton&&e.setButton.isButton,(0,l.jsxs)("section",{className:"flex justify-between mb-10",children:[(0,l.jsx)("h1",{className:"text-3xl ".concat(B().className),children:e.setPageTitle}),e.setButton&&(0,l.jsx)("div",{children:(0,l.jsx)(S.Z,{onClick:e.setButton.onClick,disabled:e.setButton.disabled,className:e.setButton.className,children:e.setButton.children})})]})}function Z(e){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x,{}),(0,l.jsxs)("main",{className:"flex flex-row no-warp items-stretch min-h-[calc(100vh-146px)]",children:[(0,l.jsx)(k,{}),(0,l.jsxs)("div",{className:"content w-full max-w-[1160px] p-11",children:[(0,l.jsx)(A,{setPageTitle:e.setPageTitle,setButton:e.setButton}),e.children]})]}),(0,l.jsx)(p,{})]})}},5343:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var l=a(5893),t=a(5386),n=a.n(t),i=a(7294),r=a(853),c=a(2175),d=a(6310),o=a(6637);function m(e){let{router:s}=e,{auth:a}=o.g,[t,m]=(0,i.useState)(null),u=(0,c.TA)({initialValues:{email:"",fullname:"",password:"",role:""},validationSchema:d.Ry().shape({email:d.Z_().email("Invalid email").required("Required"),fullname:d.Z_().min(2,"Too Short!").max(250,"Too Long!").required("Required"),password:d.Z_().required("No password provided.").min(8,"Password is too short - should be 8 chars minimum.").matches(/[a-zA-Z0-9]/,"Password can only contain Latin letters."),role:d.Z_().required("Required")}),onSubmit:e=>{h(e)}}),h=async e=>{let{data:l,error:t}=await a.admin.createUser({email:e.email,password:e.password,email_confirm:!0,role:e.role,user_metadata:{fullname:e.fullname}});if(t){m(t.message);return}s.push("/admin/settings/users")};return(0,l.jsx)(r.Z,{setPageTitle:"เพิ่มผู้ใช้งาน",children:(0,l.jsxs)("form",{noValidate:!0,onSubmit:e=>{e.preventDefault(),u.handleSubmit()},className:"flex flex-col gap-3 max-w-md",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{htmlFor:"fullname",className:"".concat(n().className," font-medium"),children:"ชื่อนามสกุล"}),(0,l.jsx)("input",{id:"fullname",type:"text",name:"fullname",className:"border p-2 rounded",onChange:u.handleChange,value:u.values.fullname}),u.errors.fullname&&u.touched.fullname?(0,l.jsx)("div",{className:"text-red-500 text-xs",children:u.errors.fullname}):null]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{htmlFor:"email",className:"".concat(n().className," font-medium"),children:"อีเมล"}),(0,l.jsx)("input",{id:"email",type:"email",name:"email",className:"border p-2 rounded",onChange:u.handleChange,value:u.values.email}),u.errors.email&&u.touched.email?(0,l.jsx)("div",{className:"text-red-500 text-xs",children:u.errors.email}):null]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{htmlFor:"password",className:"".concat(n().className," font-medium"),children:"รหัสผ่าน"}),(0,l.jsx)("input",{id:"password",type:"password",name:"password",className:"border p-2 rounded",onChange:u.handleChange,value:u.values.password}),u.errors.password&&u.touched.password?(0,l.jsx)("div",{className:"text-red-500 text-xs",children:u.errors.password}):null]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{htmlFor:"role",className:"".concat(n().className," font-medium"),children:"ระดับสิทธิ์"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("select",{className:"block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"role",onChange:u.handleChange,value:u.values.role,children:[(0,l.jsx)("option",{children:"ยังไม่เลือก"}),(0,l.jsx)("option",{value:"authenticated",children:"User"}),(0,l.jsx)("option",{value:"admin",children:"Admin"})]}),(0,l.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,l.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),u.errors.role&&u.touched.role?(0,l.jsx)("div",{className:"text-red-500 text-xs",children:u.errors.role}):null]}),(0,l.jsx)("input",{type:"submit",className:"bg-primary-600 py-2 px-4 text-primary-100 text-sm rounded-md cursor-pointer disabled:opacity-50 disabled:hover:cursor-not-allowed ".concat(n().className),value:"บันทึก"}),t&&(0,l.jsx)("div",{className:"py-2 border border-red-500 rounded-md bg-red-100",children:(0,l.jsx)("span",{className:"text-sm text-red-900 px-2",children:t})})]})})}m.requireAuth=!0,m.role=["admin"]},5386:function(e){e.exports={style:{fontFamily:"'__Anuphan_87802c'",fontStyle:"normal"},className:"__className_87802c"}}},function(e){e.O(0,[747,743,774,888,179],function(){return e(e.s=3018)}),_N_E=e.O()}]);